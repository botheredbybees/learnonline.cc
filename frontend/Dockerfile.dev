FROM node:18-alpine

WORKDIR /app

# Install system dependencies
RUN apk add --no-cache \
    curl \
    git

# Copy package files first (for better caching)
COPY package*.json ./

# Install dependencies for development
ENV NODE_ENV=development
RUN npm install

# You don't need to COPY . . because we're using volumes
# for development to sync changes in real-time

# Create necessary directories
RUN mkdir -p /app/logs

EXPOSE 8080

# Start development server with hot-reload
CMD ["npm", "run", "serve"]